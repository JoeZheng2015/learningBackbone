<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Collection里包含View</title>
</head>
<body>
        <ul class="list">
        </ul>
    <script type="text/template" class="template">
        <li>排名第<%= rank %>的是：<%= name%></li>
    </script>
    <script src="../../test/vendor/jquery.js"></script>
    <script src="../../test/vendor/underscore.js"></script>
    <script src="../../backbone.js"></script>
    <script>
        $(function() {
            var Book = Backbone.Model.extend({
                defaluts: {
                    name: '名字',
                    rank: '排名',
                    price: '价格'
                }
            });
            var Books = Backbone.Collection.extend({
                model: Book,
                comparator: 'rank'
            });
            var book1 = new Book({name: '高程', rank: 2, price: 10});
            var book2 = new Book({name: '权威', rank: 1, price: 20});
            var book3 = new Book({name: '精粹', rank: 3, price: 5});
            var books = new Books([book1, book2, book3]);

            var View = Backbone.View.extend({
                el: $('.list'),
                initialize: function() {
                    this.addAll();
                },
                addOne: function(book) {
                    var template = _.template($('.template').html());
                    this.$el.append(template(book.toJSON()));
                },
                addAll: function() {
                    this.collection.each(this.addOne, this);
                }
            });
            var view = new View({collection: books});
        });
    </script>
</body>
</html>